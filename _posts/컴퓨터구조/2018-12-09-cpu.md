---
title: CPU
date: 2018-12-09T19:34:13+09:00
author: SWnomad
layout: post
categories: 컴퓨터구조
image: /images/2018/12/no-name-3.jpg
tags:
  - ALU
  - control unit
  - CPU
  - decode
  - execute
  - fetch
  - instruction register
  - program counter
  - register
  - 명령어
  - 실행
  - 인출
  - 해독
---
CPU(Central Processing Unit)은 중앙처리장치라고 불리며 각종 산술/논리의 연산(+,-,AND,XOR 등)과 그를 위한 장치의 제어 역할을 한다.

CPU의 핵심 모듈은 **산술/논리 연산 장치**, **레지스터**, **제어장치**로 나뉠 수 있다.

&nbsp;

# 1. Register

* * *

프로그램의 실행에 필요한 모든 데이터는 메인 메모리에 로드되어 있다. CPU에서는 필요한 데이터를 가져와 임시로 레지스터에 저장해두고 사용한다. 또한 CPU의 내부 상태를 저장하기 위한 용도로도 레지스터를 사용한다.

레지스터에는 아주 많은 종류가 있는데, 그 중 핵심적인 레지스터의 용도는 다음과 같다.

&nbsp;

### 1) PC(Program Counter)

다음에 실행할 명령어의 주소를 기억

### 

### 2) IR(Instruction Register)

현재 실행중인 명렁어를 기억

&nbsp;

### 3) MAR(Memory Address Register)

메인 메모리 접근을 위한 주소를 기억

&nbsp;

### 4) MBR(Memory Buffer Register)

메인 메모리에서 읽기/쓰기 할 데이터를 기억

&nbsp;

### 5) AC(Accumulator)

연산 결과를 기억

&nbsp;

<a href="https://SWnomad.com/cpu/%ec%a0%9c%eb%aa%a9-%ec%97%86%ec%9d%8c-188/" rel="attachment wp-att-1525"><img class="aligncenter wp-image-1525" src="/images/2018/12/no-name-33.jpg" alt="" width="467" height="344" srcset="/images/2018/12/no-name-33.jpg 716w, /images/2018/12/no-name-33-300x221.jpg 300w" sizes="(max-width: 467px) 100vw, 467px" /></a>

레지스터는 메인 메모리의 RAM 보다도 빠르다. 따라서 그 가격 또한 비싸다.

실제로 C언어나 어셈블리어를 통하여 레지스터형 변수, 일반 변수를 사용해서 clock을 재면 결과가 다르게 나타난다.

&nbsp;

&nbsp;

# 2. ALU

* * *

ALU(Arithmetic Logical Unit)은 CPU의 각종 산술연산, 논리연산을 담당한다.

&nbsp;

### 1) 산술 연산기

덧셈, 뺄셈, 곱셈, 나눗셈 등을 담당한다.

이 모든 산술연산의 근본은 1비트 반가산기(half-adder)에서 시작한다.

<a href="https://SWnomad.com/cpu/%ec%a0%9c%eb%aa%a9-%ec%97%86%ec%9d%8c-189/" rel="attachment wp-att-1526"><img class="aligncenter wp-image-1526" src="/images/2018/12/no-name-34.jpg" alt="" width="438" height="162" srcset="/images/2018/12/no-name-34.jpg 578w, /images/2018/12/no-name-34-300x111.jpg 300w" sizes="(max-width: 438px) 100vw, 438px" /></a>위와 같은 1bit 반가산기를 연결하여 1bit 전가산기를 만들고, 이를 직렬 연결하여 4bit, 8bit 등의 가산기를 만드는 것이다. 그리고 가산기를 응용하여 감산기(뺄셈)를 만들 수 있고 곱셈, 나눗셈의 연산도 만들 수 있다.

&nbsp;

### 2) 논리 연산기

논리 연산은 비트 간의 연산이며, 앞에서 배운 논리 게이트들을 물리적으로 연결하여 만들 수 있다.

<a href="https://SWnomad.com/cpu/%ec%a0%9c%eb%aa%a9-%ec%97%86%ec%9d%8c-190/" rel="attachment wp-att-1527"><img class="aligncenter wp-image-1527" src="/images/2018/12/no-name-35.jpg" alt="" width="242" height="249" srcset="/images/2018/12/no-name-35.jpg 443w, /images/2018/12/no-name-35-291x300.jpg 291w" sizes="(max-width: 242px) 100vw, 242px" /></a>

논리 연산은 산술 연산보다 속도가 월등히 빠르다.

가령 *2 연산 같은 경우, 산술 연산을 이용하기보다는 << 연산자를 사용해서 모든 bit를 왼쪽으로 1칸씩 이동시키는 것이 빠르다.

&nbsp;

### 3) ALU 내부 레지스터

ALU는 연산기 뿐만 아니라 산술 연산을 하다가 bit수를 넘어서는 연산이 일어났을 때 overflow를 알리는 flag를 띄우거나 계산의 중간값을 임시적으로 저장하는 레지스트 등도 있다.

&nbsp;

&nbsp;

# 3. Control Unit

* * *

PC가 가르키는 주소의 명령어를 읽어서 해독하고 실행을 위한 제어 신호들을 다른 디바이스로 전달하는 역할을 한다. CPU의 모든 모듈을 제어하는 대장격 디바이스. ALU에 연산 명령, 메인 메모리에 읽기/쓰기 명령 등은 모두 CU에서 내린다.

PC에 의한 명령어 실행 cycle은 아래와 같다.

### 1) fetch : 명령어 인출

PC 레지스터의 주소를 참조하여 메인 메모리로부터 실행할 명령어를 읽어온다

&nbsp;

### 2) decode : 명령어 해독

인출된 명령어를 해독

&nbsp;

### 3) execute : 명령어 실행

decode 결과에 따라 실행을 하기 위한 신호를 control bus를 통해서 다른 장치로 전송

&nbsp;

<a href="https://SWnomad.com/cpu/%ec%a0%9c%eb%aa%a9-%ec%97%86%ec%9d%8c-191/" rel="attachment wp-att-1529"><img class="aligncenter  wp-image-1529" src="/images/2018/12/no-name-36.jpg" alt="" width="266" height="226" srcset="/images/2018/12/no-name-36.jpg 320w, /images/2018/12/no-name-36-300x255.jpg 300w" sizes="(max-width: 266px) 100vw, 266px" /></a>

&nbsp;

&nbsp;