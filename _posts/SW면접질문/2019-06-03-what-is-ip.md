---
title: 9. IP주소(Internet Protocol Address)
date: 2019-06-03T20:00:00+09:00
author: SWnomad
layout: post
categories: SW/IT지식
tags:
  - IP
  - internet protocol
  - 공인
  - 사설
  - 고정
  - 유동
  - dhcp
  - isp
  - IPv4
  - IPv6
  - 프로토콜
---

<br>
## 1. IP란?
* * *

컴퓨터, 모바일, IoT 디바이스 등 인터넷을 통해 통신을 하는 모든 장비는 IP주소를 가지고 있어야한다. 그럼 IP는 무엇일까?

위키백과에서는 아래와 같이 설명하고 있다.

> IP 주소(Internet Protocol address, 표준어: 인터넷규약주소)는 컴퓨터 네트워크에서 장치들이 서로를 인식하고 통신을 하기 위해서 사용하는 특수한 번호이다. 네트워크에 연결된 장치가 라우터이든 일반 서버이든, 모든 기계는 이 특수한 번호를 가지고 있어야 한다. 이 번호를 이용하여 발신자를 대신하여 메시지가 전송되고 수신자를 향하여 예정된 목적지로 전달된다. (...이하생략)

<br>

그러니까 IP란 통신을 위한 데이터를 주고받을 때, 이 데이터가 _어디에서 왔는지_, 그리고 _어디로 가야하는지_ 알려주는 주소의 개념이다.

<br>
## 2. IPv4(IP version4)
* * *

IPv4는 32bit를 사용해 IP주소를 표현한다. 현재 자신이 사용하고 있는 IPv4를 확인해본다면 0~255사이의 십진수 네 개로 이루어져 있는 것을 확인할 수 있다. 8bit가 0~255까지 나타낼 수 있고, 이러한 8bit가 네 개, 즉 32bit 있는 것이다. 32bit가 표현할 수 있는 경우의 수는 2^32개, 대략 43억개가 좀 덜된다. 따라서 IPv4는 000.000.000.000 부터 255.255.255.255 까지 대략 43억 개의 주소를 가질 수 있다.

참고로 IPv6는 IPv4의 주소부족 문제를 해결하기 위해 나온 새로운 인터넷 프로토콜 버전6로서, 64bit 주소체계를 사용한다.

<br>
## 3. 공인IP와 사설IP
* * *

IPv4 주소는 우리가 임의로 부여할 수 있는것이 아니기때문에 43억개의 IP 중에서 아무거나 가져다 쓴다고 인터넷 연결이 되는것이 아니다. IP주소는 국제적으로는 ICANN, 국내에서는 인터넷 진흥원(KISA)등의 공인기관에서 할당해주기 때문이다.

위에서 말한 기관에서 000.000.000.000 ~ 255.255.255.255의 주소 중에서 일부를 제외하고는 모두 공인IP로 지정해놓았다. 이 제외된 일부 IP대역을 사설IP라고 부르며, 그 대역은 아래와 같다.

* 10.0.0.0 ~ 10.255.255.255
* 172.16.0.0 ~ 172.31.255.255
* 192.168.0.0 ~ 192.168.255.255

<br>

이 주소는 인터넷 유저가 임의로 부여해도 되는 사설 대역이다. 그런데, 사설 IP주소가 할당된 기기는 외부에서 접근을 못한다. 소켓 프로그래밍을 할 때 공유기를 통해 인터넷 연결을 하고 서버를 돌리면서 왜 응답이 없는지 답답해하는 사람들은 바로 이 사설IP에 대한 이해가 없어서 그런것이다.

<br>

![9-1](/images/sw_interview/9-1.png){: width="100%" height="100%"}

<br>

공유기를 통한 인터넷 방식은 이렇다. 먼저 공유기에 공인IP가 할당이 된다. 그리고 여러대의 기기가 공유기를 통해 연결되면서 공유기로부터 사설 IP를 부여받는다. 그런데 외부에서는 공인 IP주소밖에 알아볼 수 없다. 공인되지 않은 사설 IP주소는 외부에서 어디인지 찾지 못한다. 우편 배달부한테 "XX시 XX동 XX번지"같이 국가적으로 공인 된 주소가 아닌 "아줌마랑 아저씨, 그리고 남자애 하나 사는 집이요" 라고 하는것과 똑같은 것이다. 따라서 사설 IP에서 서버를 돌리면 외부에서는 접근하지 못하고 내부(같은 공유기에 연결된 기기) 끼리만 통신이 가능하다.

<br>
## 4. 고정IP와 유동IP
* * *

공인IP와 사설IP는 사용범위에 따른 구분이었다면, 고정IP와 유동IP는 IP 할당 방식에 따른 구분이다.

고정IP는 말 그대로 하나의 기기에 독점적으로 부여되어 반납전까지는 다른 기기에 부여될 수 없도록 한 것을 말한다. 컴퓨터를 껐다켜도 변하지 않는 IP주소이다. 고정IP는 주소가 변하지 말아야 할 웹페이지, 게임 서버 등에 활용된다. 만약 구글 홈페이지에 접속하려는데, 혹은 내가 자료를 저장해놓은 클라우드 서버에 접속을 하려는데 IP주소가 계속해서 바뀌면 안되므로 이러한 경우 고정IP를 사용한다.

반대로 유동IP는 하나의 IP주소를 여러 기기에서 돌아가면서 사용할 수 있게 부여한 방식이다. 유동IP를 사용하는 네트워크에 연결하는 순간 DHCP에 의해 남아있는 IP가 자동으로 할당된다. 그리고 인터넷을 벗어나는 순간 다시 IP를 반납하므로, 해당 IP주소는 다른 기기에서 사용할 수 있는 상태가 된다. 인터넷 초기에는 지금처럼 많은 IP주소가 필요할 것이라고 생각하지 못해 IPv4를 이용해 고정 IP를 남발하며 뿌려댔다. 따라서 지금은 IP주소 부족 문제를 해결하기 위해 ISP(통신사)에서는 유동IP를 사용하여 IP 회전률을 높이는 방식이다.

<br>

![9-1](/images/sw_interview/9-1.png){: width="100%" height="100%"}

<br>

DHCP는 Dynamic Host Configuration Protocol로서 호스트 유동IP 할당을 관리하기 위해 만든 표준이다. DHCP서버는 표준에따라 호스트에게 자동으로 남는 유동IP를 할당해준다.