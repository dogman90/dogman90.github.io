---
title: (솔라) 5. 코어(core)
date: 2020-03-25T11:37:19+09:00
author: nobbaggu
layout: post
categories: 솔라(Solr)
tags:
  - solr
  - 솔라
  - 아파치
  - apache
  - 코어
  - core
---

## 목차 ##
---
- [1.코어란?](#1)
- [2.코어 생성](#2)
- [3.코어 삭제](#3)

<br>
<a name="1"/>
## 1. 코어란? ##
----

코어는 실행중인 솔라에서 하나의 인덱스를 가리킨다. 서버가 stand-alone 환경이라면 코어와 인덱스는 1:1로 매칭된다. 솔라가 클라우드 환경에서 실행중이면 하나의 인덱스(컬렉션)이 여러 서버로 나누어진다(샤딩- sharding). 다른말로 표현하면 하나의 컬렉션이 여러 분산서버에 걸쳐 여러개의 코어로 인덱스 되었다고 할 수 있다.

또한 데이터 유실을 방지하기 위해 하나의 코어를 여러개의 복제본(레플리카 - replica)으로 여러번 저장한다.

<br>
![solr_cloud](https://nobbaggu.github.io/images/solr/5/solr_cloud.png){: width="50%" height="50%"}

위 그림은 하나의 인덱스 컬렉션이 두 대의 분산서버에 나누어 저장된 모습을 나타낸다.

하나의 컬렉션을 반으로 쪼개어 shard1과 shard2로 나누었다. 각각의 샤드는 한 대의 서버에서 하나의 코어로 생성된다. 또한 각각의 코어는 다른 서버에 복제되어 저장시켰다. 이러한 경우 한 대의 컴퓨터가 고장이 난다해도 나머지 한대에 복제본이 있기때문에 검색에는 문제가 없게 된다.

<br>
<a name="2"/>
## 2. 코어 생성 ##
----

~~~ console
#solr 폴더로 이동
bin/solr start #솔라 실행
bin/solr create -c solr_sample #solr_sample 코어 생성
bin/solr create -c my_core #my_core 코어 생성
~~~

위의 명령어를 입력하면 아래와 같은 실행 메세지가 나온다.

~~~ console
Creating new core 'solr_sample' using command: 
http://localhost:8983/Solr/admin/cores?action=CREATE&name=Solr_sample&instanceD 
ir = Solr_sample {  
   "responseHeader":{    
      "status":0,    
      "QTime":11550
   },  
   "core":"Solr_sample" 
} 
~~~

![core_created](https://nobbaggu.github.io/images/solr/5/core_created.png){: width="50%" height="50%"}

이제 솔라 웹 인터페이스에서 확인하면 코어가 생성된 것을 볼 수 있다.

<br>
<a name="3"/>
## 3. 코어 삭제 ##
----

~~~ console
bin/solr delete -c my_core #my_core 코어 삭제
~~~

아래의 실행 메시지가 뜨면서 코어가 삭제된다.

~~~ console
Deleting core 'my_core' using command: 
http://localhost:8983/Solr/admin/cores?action=UNLOAD&core = my_core&deleteIndex
   = true&deleteDataDir = true&deleteInstanceDir = true  {
   
   "responseHeader" :{    
      "status":0,    
      "QTime":170
   }
}
~~~

![core_deleted](https://nobbaggu.github.io/images/solr/5/core_deleted.png){: width="50%" height="50%"}
